<section id="arc">
<h2>D√©formation d‚Äôun objet √©lastique : arc et fl√®che</h2>

<p>
Le travail exerc√© sur l‚Äôarc provoque sa d√©formation et le stockage
d‚Äô√©nergie interne (√©nergie √©lastique), qui peut √™tre restitu√©e √† la fl√®che.
</p>

<div class="sim">

<canvas id="arcSim" width="520" height="260"></canvas>

<label>
Tension de l‚Äôarc (travail appliqu√©)
<input type="range" id="pull" min="0" max="100" value="0" oninput="updateArc()">
</label>

<p>
√ânergie interne stock√©e :
<b><span id="Earc">0</span> J</b>
</p>

<button onclick="shoot()">‚ñ∂ Tirer</button>
<button onclick="pause()">‚è∏ Pause / Reprendre</button>
<button onclick="resetSim()">üîÅ Recommencer</button>

</div>

<script>
const canvas = document.getElementById("arcSim");
const ctx = canvas.getContext("2d");

let arrowX = 240;
let flying = false;
let paused = false;
let interval = null;

// particules microscopiques de l‚Äôarc
let particles = [];
for(let i=0;i<12;i++){
  particles.push({x:120+i*8, y:130});
}

function drawArc(bend, showArrow=true){
  ctx.clearRect(0,0,520,260);

  // ARC
  ctx.beginPath();
  ctx.moveTo(120,30);
  ctx.quadraticCurveTo(120-bend,130,120,230);
  ctx.strokeStyle="brown";
  ctx.lineWidth=5;
  ctx.stroke();

  // CORDE
  ctx.beginPath();
  ctx.moveTo(120,30);
  ctx.lineTo(120+bend,130);
  ctx.lineTo(120,230);
  ctx.strokeStyle="black";
  ctx.lineWidth=2;
  ctx.stroke();

  // PARTICULES MICRO
  ctx.fillStyle="#1e88e5";
  particles.forEach((pt,i)=>{
    ctx.beginPath();
    ctx.arc(pt.x - bend*0.15, pt.y + Math.sin(i)*4, 4, 0, Math.PI*2);
    ctx.fill();
  });

  // BARRE √âNERGIE
  ctx.fillStyle="#ddd";
  ctx.fillRect(360,200,120,15);
  ctx.fillStyle="#ff9800";
  ctx.fillRect(360,200,Math.min(energy,120),15);
  ctx.strokeRect(360,200,120,15);
  ctx.fillStyle="black";
  ctx.fillText("√ânergie interne",360,195);

  // FL√àCHE
  if(showArrow){
    ctx.fillStyle="black";
    ctx.fillRect(arrowX,125,70,6);
    ctx.beginPath();
    ctx.moveTo(arrowX+70,125);
    ctx.lineTo(arrowX+85,128);
    ctx.lineTo(arrowX+70,131);
    ctx.fill();
  }
}

let energy = 0;

function updateArc(){
  if(flying) return;

  let p = pull.value;
  let bend = p*0.6;
  energy = 0.02*p*p;
  document.getElementById("Earc").innerText = energy.toFixed(1);
  arrowX = 120 + bend + 60;

  drawArc(bend,true);
}

updateArc();

function shoot(){
  if(flying) return;
  flying = true;
  paused = false;

  let speed = pull.value/5;
  let bend = pull.value*0.6;

  interval = setInterval(()=>{
    if(paused) return;

    arrowX += speed;
    drawArc(0,true);

    if(arrowX > 520){
      clearInterval(interval);
      flying = false;
    }
  },30);
}

function pause(){
  paused = !paused;
}

function resetSim(){
  clearInterval(interval);
  flying = false;
  paused = false;
  pull.value = 0;
  energy = 0;
  arrowX = 240;
  document.getElementById("Earc").innerText = "0";
  drawArc(0,true);
}
</script>

<div class="box">
Le travail exerc√© sur l‚Äôarc est stock√© sous forme d‚Äô√©nergie interne √©lastique.
Lors du tir, cette √©nergie est transf√©r√©e √† la fl√®che sous forme d‚Äô√©nergie cin√©tique.
</div>

</section>
<section id="arc">
<h2>D√©formation d‚Äôun objet √©lastique : arc et fl√®che</h2>

<p>
Lorsqu‚Äôon tend un arc, le travail exerc√© provoque sa d√©formation.
Cette d√©formation modifie les interactions microscopiques entre les particules
de l‚Äôarc et entra√Æne une mise en r√©serve d‚Äô√©nergie interne (√©nergie √©lastique).
</p>

<div class="sim">

<canvas id="arcSim" width="520" height="260"></canvas>

<label>
Travail appliqu√© (tension de l‚Äôarc)
<input type="range" id="pull" min="0" max="100" value="0" oninput="updateArc()">
</label>

<p>
√ânergie interne stock√©e :
<b><span id="Earc">0</span> J</b>
</p>

<button onclick="releaseArrow()">Rel√¢cher la fl√®che</button>

</div>

<script>
const canvas = document.getElementById("arcSim");
const ctx = canvas.getContext("2d");

let arrowX = 260;
let released = false;

// particules microscopiques de l‚Äôarc
let particles = [];
for(let i=0;i<12;i++){
  particles.push({x:120+i*8, y:130});
}

function updateArc(){
  if(released) return;

  const p = pull.value;
  const bend = p*0.6;
  const E = 0.02*p*p; // mod√®le simple d‚Äô√©nergie √©lastique
  document.getElementById("Earc").innerText = E.toFixed(1);

  ctx.clearRect(0,0,520,260);

  // ARC (courbure)
  ctx.beginPath();
  ctx.moveTo(120,30);
  ctx.quadraticCurveTo(120-bend,130,120,230);
  ctx.strokeStyle="brown";
  ctx.lineWidth=5;
  ctx.stroke();

  // CORDE
  ctx.beginPath();
  ctx.moveTo(120,30);
  ctx.lineTo(120+bend,130);
  ctx.lineTo(120,230);
  ctx.strokeStyle="black";
  ctx.lineWidth=2;
  ctx.stroke();

  // FL√àCHE
  arrowX = 120 + bend + 60;
  ctx.fillStyle="black";
  ctx.fillRect(arrowX,125,70,6);
  ctx.beginPath();
  ctx.moveTo(arrowX+70,125);
  ctx.lineTo(arrowX+85,128);
  ctx.lineTo(arrowX+70,131);
  ctx.fill();

  // MOD√àLE MICROSCOPIQUE (particules de l‚Äôarc)
  ctx.fillStyle="#1e88e5";
  particles.forEach((pt,i)=>{
    ctx.beginPath();
    ctx.arc(pt.x - bend*0.15, pt.y + Math.sin(i)*4, 4, 0, Math.PI*2);
    ctx.fill();
  });

  // BARRE D‚Äô√âNERGIE
  ctx.fillStyle="#ddd";
  ctx.fillRect(360,200,120,15);
  ctx.fillStyle="#ff9800";
  ctx.fillRect(360,200,Math.min(E,120),15);
  ctx.strokeRect(360,200,120,15);
  ctx.fillStyle="black";
  ctx.fillText("√ânergie interne",360,195);
}

updateArc();

function releaseArrow(){
  if(released) return;
  released = true;

  let speed = pull.value/4;
  let interval = setInterval(()=>{
    ctx.clearRect(0,0,520,260);
    arrowX += speed;

    // fl√®che en mouvement
    ctx.fillRect(arrowX,125,70,6);
    ctx.beginPath();
    ctx.moveTo(arrowX+70,125);
    ctx.lineTo(arrowX+85,128);
    ctx.lineTo(arrowX+70,131);
    ctx.fill();

    if(arrowX > 520){
      clearInterval(interval);
    }
  },30);
}
</script>

<div class="box">
Le travail exerc√© sur l‚Äôarc est stock√© sous forme d‚Äô√©nergie interne (√©lastique).
Lors du rel√¢chement, cette √©nergie est transf√©r√©e √† la fl√®che sous forme
d‚Äô√©nergie cin√©tique.
</div>

</section>
